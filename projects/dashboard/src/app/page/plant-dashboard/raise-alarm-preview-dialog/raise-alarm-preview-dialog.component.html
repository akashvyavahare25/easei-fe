<!-- <div class="dialog">
    <h2 mat-dialog-title>Update Alarm</h2>
    <mat-dialog-content>
        <form  [formGroup]="updateAlarm">
            <div class="row" style="width: 100%;padding: 10px 0px;">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <p class="label">Ticket Id</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text" formControlName="ticketId"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Ticket Date</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text" formControlName="ticketDate"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Ticket Type</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="ticket_type"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Raised By</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="raised_by"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">NCU</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="ncuId"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Table ID</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="tableId"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">BCU ID</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="bcuId"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Component</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="component"  matNativeControl>
                            </mat-form-field>
                        </div> 
                        <div class="col-md-4">
                            <p class="label">Alarm Id</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="alarmid"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Target TAT / Actual TAT</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="targetTat"  matNativeControl>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <p class="label">Down Since</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="down_since"  matNativeControl>
                            </mat-form-field>
                        </div> 
                        <div class="col-md-4">
                            <p class="label">Priority</p>
                            <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text"   formControlName="priority"  matNativeControl>
                            </mat-form-field>
                        </div> 
                        <div class="col-md-4">
                        <p class="label">Status</p>
                        <mat-form-field appearance="fill">
                            <mat-select matNativeControl  formControlName="status"> 
                                <mat-option  *ngFor="let s of allStatusList" [value]="s">
                                    {{s}}
                                </mat-option>
                               </mat-select>
                        </mat-form-field>
                    </div> 
                    </div>
                </div>
               
            </div>
        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close class="cancel">Cancel</button>
        <button mat-button  cdkFocusInitial class="save" >Update</button>
    </mat-dialog-actions>
</div> -->

<div class="row">
    <div class="col-md-10">
        <h2 mat-dialog-title  *ngIf="!isView">Update Alarm</h2>
        <h2 mat-dialog-title  *ngIf="isView">Update Alarm History</h2>
    </div>
    <div class="col-md-2">
        <mat-dialog-actions align="end">
            <button type="button" class="history" *ngIf="!isView" (click)="openTicket()">History</button>
            <span class="material-icons-outlined" *ngIf="!isView"  mat-button mat-dialog-close >close</span> 
            <span class="material-icons-outlined"  mat-button  *ngIf="isView && !isViewComments" (click)="closeUpdatehistory('h1')">close</span> 
            <span class="material-icons-outlined"  mat-button  *ngIf="isViewComments" (click)="closeUpdatehistory('h2')">close</span> 
        </mat-dialog-actions>
       
    </div>
</div>
<mat-dialog-content class="mat-typography" >
    <form  [formGroup]="updateAlarm" autocomplete="off">   
            <!--     <div class="row" *ngIf="!isView">
                    <table class="table table-border">
                        <tr>
                            <td>Ticket Id</td>
                            <td>Ticket Date</td>
                            <td>Ticket Type</td>
                            <td>Raised By</td>
                            <td>Assignee</td>
                            <td>Status</td>
                            <td>Priority</td>
                        </tr>
                        <tr>
                            <td><button type="button" class="btn btn-link resumeAbort" (click)="openTicket()">{{formData.ticketId}} </button></td>
                             <td>{{formData.ticket_date}}</td>
                            <td>{{formData.ticket_type}}</td>
                            <td>{{formData.raised_by}}</td>
                            <td>{{formData.assignee}}</td>
                            <td>{{formData.status}}</td>
                            <td>{{formData.priority}}</td>
                        </tr>
                    </table>
             </div>
             <div class="row" *ngIf="!isView">
                <table class="table table-border">
                    <tr>
                        <td>Comment Date</td> 
                        <td>Comment By</td> 
                        <td>Description /Comment</td>
                        <td>Update By</td>
                        <td>Update Date</td>
                    </tr>
                    <tr>
                        <td>12/12/2022</td>
                        <td>Test</td>
                        <td>Test</td>
                        <td>Test</td>
                         <td>12/12/2022</td>
                    </tr>
                </table> 
         </div> -->
        <div class="row" *ngIf="!isView && !isViewComments">
            <div class="col-md-4">
                <p class="label">Ticket Id</p>
                <mat-form-field appearance="fill" class="customSelect">
                    <input matInput type="text" formControlName="ticketId" matNativeControl>
                </mat-form-field>
            </div>
        <div class="col-md-4">
            <p class="label">Assignee</p>
            <mat-form-field appearance="fill">
                <mat-select matNativeControl formControlName="assignee">
                    <mat-option *ngFor="let a of assigneeList" [value]="a">
                        {{a}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
            <div class="col-md-4">
                <p class="label">Status</p>
                <mat-form-field appearance="fill">
                    <mat-select matNativeControl formControlName="status">
                        <mat-option *ngFor="let s of allStatusList" [value]="s">
                            {{s}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-4">
                <p class="label">Priority</p>
                <mat-form-field appearance="fill" class="customSelect">
                    <mat-select matNativeControl formControlName="priority">
                        <mat-option (click)="optionClick()" *ngFor="let p of priorityList" [value]="p">
                            {{p}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-4">
                <div class="outer customSelect">
                    <p class="label">Attachment</p>
                    <input #fileInput type="file" hidden formControlName="fileAttachment" (change)="handleChange($event)">
                    <button mat-button class="uploadFile" (click)="fileInput.click()">+ Upload file</button>
                </div>
                <span class="margin" *ngIf="fileName">Filename: {{file.name}}</span>
            </div>
            <div class="col-md-12">
                <p class="label" style="margin-top: 10px;">Description</p>
                <mat-form-field appearance="fill">
                    <textarea matInput formControlName="description" rows="3" [maxlength]="250"  (keyup)="keyFunc($event)" 
                        placeholder=""></textarea>
                    <!-- <input matInput placeholder="Last Name" type="text" matNativeControl> -->
                </mat-form-field>
                <span class="margin">characters left {{count}}</span>
            </div>
        </div>
        <mat-dialog-actions align="end" *ngIf="!isView && !isViewComments">
            <button mat-button mat-dialog-close class="cancel">Cancel</button>
            <button mat-button   cdkFocusInitial class="save" type="submit">Update</button>
        </mat-dialog-actions>
    </form>

    <div class="tablecss" *ngIf="isView && !isViewComments">
        <table mat-table [dataSource]="dataSource1" matSort (matSortChange)="announceSortChange($event)" class="mat-elevation-z8">
              <ng-container matColumnDef="updated_by">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    sortActionDescription="Sort by updated_by">
                    Updated By
                </th>
                <td mat-cell *matCellDef="let element"> {{element.updated_by}}
                </td>
            </ng-container>
            <ng-container matColumnDef="assignee">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    sortActionDescription="Sort by assignee">
                    Assignee
                </th>
                <td mat-cell *matCellDef="let element"> {{element.assignee}}
                </td>
            </ng-container>
            <ng-container matColumnDef="priority">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    sortActionDescription="Sort by priority">
                    Priority
                </th>
                <td mat-cell *matCellDef="let element"> {{element.priority}}
                </td>
            </ng-container> 
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    sortActionDescription="Sort by status">
                    Status
                </th>
                <td mat-cell *matCellDef="let element"> {{element.status}}
                </td>
            </ng-container>  
            <ng-container matColumnDef="updated_date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header
                    sortActionDescription="Sort date updated_date">
                    Updated Date
                </th>
                <td mat-cell *matCellDef="let element"> {{element.updated_date}}
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="highlight(row)">
            </tr>
        </table>
        <mat-paginator #paginator
        [pageSize]="10"
        [pageSizeOptions]="[5, 10, 20,50]">
        </mat-paginator>
    </div>
<div  *ngIf="isViewComments">
    <form  [formGroup]="updateAlarm" autocomplete="off">   
    <div class="row">
        <div class="col-lg-8">
                <div class="row">
                    <div class="col-md-6">
                        <p class="label">Assignee</p>
                        <mat-form-field appearance="fill" class="customSelect">
                            <input matInput type="text" formControlName="assignee"  matNativeControl>
                        </mat-form-field>
                    </div>
                        <div class="col-md-6">
                            <p class="label">Status</p>
                            <mat-form-field appearance="fill" class="customSelect">
                                <input matInput type="text" formControlName="status"  matNativeControl>
                            </mat-form-field>
                        </div>
                <div class="col-md-6">
                    <p class="label">Update By :</p>
                    <mat-form-field appearance="fill" class="customSelect">
                        <input matInput type="text" [value]="rowdata.updated_by"  [disabled]="true" matNativeControl>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <p class="label">Update Date :</p>
                    <mat-form-field appearance="fill" class="customSelect">
                        <input matInput type="text"  [value]="rowdata.updated_date" [disabled]="true" matNativeControl>
                    </mat-form-field>
                </div>
                <div class="col-md-12">
                    <p class="label">Priority</p>
                    <mat-form-field appearance="fill" class="customSelect">
                        <input matInput type="text" formControlName="priority"  matNativeControl>
                    </mat-form-field>
                </div>
                 <div class="col-md-12">
                    <p class="label" style="margin-top: 10px;">Comment: </p>
                    <div class="row" style="padding:0px;margin:0px">
                        <div class="col-md-11" style="padding:0px;margin:0px">
                            <mat-form-field class="commentc" appearance="fill">
                                <textarea  matInput rows="2"  [formControl]="comment"  placeholder="Add a comment ..."></textarea>
                            </mat-form-field>
                        </div>
                        <div class="col-md-1"><a (click)="addComment()"><span class="material-icons-outlined iconClass">send </span></a> </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="row"> 
                <p class="labelc">Comments: </p>
                <div class="col-md-12"  style="overflow:scroll; height:384px;border: 1px solid #00000024;margin-top: 10px;">
                    <div *ngFor="let c of rowdata.comment">
                        <p class="label" style="margin-top: 15px;"><span>{{c.comment_by}}</span> <span style="margin-left: 60px;">{{c.comment_date}}</span> </p>
                        <span style="margin-left: 8px;">{{c.comment}}</span>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </form>
 </div>
</mat-dialog-content>